- sensor:
    scan_interval: 3610
    name: Solar Forecast West
    command: "curl -s 'https://api.forecast.solar/estimate/:lat/:lon/:dec/:az/:kwp?time=iso8601' -H 'accept: text/csv' -H 'X-Delimiter: |' -H 'X-Separator: ;' | jq --raw-input '{ west: [(inputs | split(\";\")) | {label: .[0], date: .[1], values: .[2] | gsub(\"[\\r]\"; \"\") | tonumber } ] | group_by(.label) | map({ key: (.[0].label), value: [.[] ] }) | from_entries }' "    
    value_template: "OK"
    json_attributes:
        - west

  # ADJUST THE VALUE BELOW TO YOUR POSITIONS AND SOLAR SETUP
  # https://api.forecast.solar/estimate/:lat/:lon/:dec/:az/:kwp 
  
  #:lat - latitude of location, -90 (south) … 90 (north); handeled with a precission of 0.0001 or abt. 10 m
  #:lon - longitude of location, -180 (west) … 180 (east); handeled with a precission of 0.0001 or abt. 10 m
  #:dec - plane declination, 0 (horizontal) … 90 (vertical) - always in relation to the earth's surface; integer
  #:az - plane azimuth, -180 … 180 (-180 = north, -90 = east, 0 = south, 90 = west, 180 = north); integer
  #:kwp - installed modules power in kilo watt; float
  # https://doc.forecast.solar/api:estimate 


# ADJUST THE VALUE BELOW TO YOUR POSITION AND SOLAR SETUP
# https://api.forecast.solar/estimate/:lat/:lon/:dec/:az/:kwp 
#
# Example:
# https://api.forecast.solar/estimate/59.33/18.06/30/180/9.72
#
# Explanation:
# :lat  -> 59.33   (approx. latitude for Stockholm, Sweden)
# :lon  -> 18.06   (approx. longitude for Stockholm, Sweden)
# :dec  -> 30      (panel tilt angle in degrees)
# :az   -> 180     (facing south)
# :kwp  -> 9.72    (installed panel capacity in kWp)
#
# For more details, see:
# https://doc.forecast.solar/api:estimate
